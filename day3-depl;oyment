 145  nano dep.yml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
spec:
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
    spec:
      containers:
      - name: myapp
        image: nginx
       
        ports:
        - containerPort: 80

  146  kubectl apply -f dep.yml
          #this will show the deployment
  147  kubectl get deploy
          #you can see the pod with the deployment 
  148  kubectl get pod
          #if you delete the pod please change the pod id with your own pod id
  149  kubectl delete pod myapp-5d6b777b8-pj6d7
          #this will show that the pod is back
  150  kubectl get pod
#lets create another deployment 
 159  nano dep2.yml
#kubectl apply -f dep.yml file
#when you run your yaml file it will execute from top to bottom and left to right
apiVersion: apps/v1 #apps/v1 is the version of the deployment api``
kind: Deployment #we are using deployment api
metadata:
  name: my-first-deployment #this is the name of the deployment 
  namespace: dev #specifying the namespace where deployment will be created
  labels:
    app: myapp #label should be provided in key value pair
spec: #we are specifying the spec of the deployment
  replicas: 3 #we are creating 3 replicas of the pod
  selector: #selector is to find which pod to manage
    matchLabels: #like an match ecpression
      app: myapp #all the three pod will be having this label
  template: #we are creating three pod all the three will run contaienr
    metadata: #so using template metadata we are defindin the metadata of the pod
      labels:
        app: myapp #all the three pod will be having this label
    spec: #specifying the spec of the pod
      containers:
      - name: myapp
        image: nginx
       
        ports:
        - containerPort: 80
#note : the spec.selector.matchLabels and spec.template.metadata.labels should be same otherwise deployment will not work
#it is like an map of key value pairs you can say it is like an match expression
#this deployment containes the rs of three
  160  kubectl apply -f dep2.yml
###get deploy will show your deployment with status
  161  kubectl get deploy
#this will show the relationship between deployment and a rs with uniquew hash value generated by k8s
 162  kubectl get rs
#get pod will show the relationship deployment+uniquers+uniquepodid
  163  kubectl get pod
#check the labels of your deployment
  165  kubectl get pod --show-labels
#look into the event log of deploy and rs
  168  kubectl describe deploy my-first-deployment
  169  kubectl get rs
  170  kubectl describe rs my-first-deployment-5d6b777b8

#lets do the scaling 
#the below command will do manual scaling
 173  kubectl scale deployment my-first-deployment --replicas=5
  174  kubectl get deploy
  175  kubectl get rs
  176  kubectl get pod
#this will do autoscaling
  177  kubectl autoscale deployment my-first-deployment --min=5 --max=10 --cpu-percent=80
#get hpa will show horizontal autoscaling
  178  kubectl get hpa
#you can also see the running configration
 181  kubectl get deploy
  182  kubectl edit deploy my-first-deployment
#to save the file press Esc :wq
  183  kubectl get pod
  184  kubectl edit pod my-first-deployment-5d6b777b8-27cvn


